{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "application/javascript": [
       "if(window['d3'] === undefined ||\n",
       "   window['Nyaplot'] === undefined){\n",
       "    var path = {\"d3\":\"https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min\",\"downloadable\":\"http://cdn.rawgit.com/domitry/d3-downloadable/master/d3-downloadable\"};\n",
       "\n",
       "\n",
       "\n",
       "    var shim = {\"d3\":{\"exports\":\"d3\"},\"downloadable\":{\"exports\":\"downloadable\"}};\n",
       "\n",
       "    require.config({paths: path, shim:shim});\n",
       "\n",
       "\n",
       "require(['d3'], function(d3){window['d3']=d3;console.log('finished loading d3');require(['downloadable'], function(downloadable){window['downloadable']=downloadable;console.log('finished loading downloadable');\n",
       "\n",
       "\tvar script = d3.select(\"head\")\n",
       "\t    .append(\"script\")\n",
       "\t    .attr(\"src\", \"http://cdn.rawgit.com/domitry/Nyaplotjs/master/release/nyaplot.js\")\n",
       "\t    .attr(\"async\", true);\n",
       "\n",
       "\tscript[0][0].onload = script[0][0].onreadystatechange = function(){\n",
       "\n",
       "\n",
       "\t    var event = document.createEvent(\"HTMLEvents\");\n",
       "\t    event.initEvent(\"load_nyaplot\",false,false);\n",
       "\t    window.dispatchEvent(event);\n",
       "\t    console.log('Finished loading Nyaplotjs');\n",
       "\n",
       "\t};\n",
       "\n",
       "\n",
       "});});\n",
       "}\n"
      ],
      "text/plain": [
       "\"if(window['d3'] === undefined ||\\n   window['Nyaplot'] === undefined){\\n    var path = {\\\"d3\\\":\\\"https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min\\\",\\\"downloadable\\\":\\\"http://cdn.rawgit.com/domitry/d3-downloadable/master/d3-downloadable\\\"};\\n\\n\\n\\n    var shim = {\\\"d3\\\":{\\\"exports\\\":\\\"d3\\\"},\\\"downloadable\\\":{\\\"exports\\\":\\\"downloadable\\\"}};\\n\\n    require.config({paths: path, shim:shim});\\n\\n\\nrequire(['d3'], function(d3){window['d3']=d3;console.log('finished loading d3');require(['downloadable'], function(downloadable){window['downloadable']=downloadable;console.log('finished loading downloadable');\\n\\n\\tvar script = d3.select(\\\"head\\\")\\n\\t    .append(\\\"script\\\")\\n\\t    .attr(\\\"src\\\", \\\"http://cdn.rawgit.com/domitry/Nyaplotjs/master/release/nyaplot.js\\\")\\n\\t    .attr(\\\"async\\\", true);\\n\\n\\tscript[0][0].onload = script[0][0].onreadystatechange = function(){\\n\\n\\n\\t    var event = document.createEvent(\\\"HTMLEvents\\\");\\n\\t    event.initEvent(\\\"load_nyaplot\\\",false,false);\\n\\t    window.dispatchEvent(event);\\n\\t    console.log('Finished loading Nyaplotjs');\\n\\n\\t};\\n\\n\\n});});\\n}\\n\""
      ]
     },
     "metadata": {},
     "output_type": "display_data"
    }
   ],
   "source": [
    "require 'distribution'\n",
    "require 'narray'\n",
    "require 'daru'\n",
    "require 'gnuplotrb'\n",
    "require 'csv'\n",
    "nil"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Variables"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {
    "collapsed": false
   },
   "outputs": [],
   "source": [
    "input = \"../CLD-Calibration.csv\"\n",
    "timestamp = \"Zeit\"\n",
    "nil"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Data Preparation"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 52,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table><tr><th colspan=\"2\">Daru::DataFrame:31469440  rows: 10  cols: 1<tr><th></th><th>NO / ppb</th></tr><tr><td>2016-01-21T15:38:36+00:00</td><td>0.1</td></tr><tr><td>2016-01-21T15:38:59+00:00</td><td>0.2</td></tr><tr><td>2016-01-21T15:39:21+00:00</td><td>0.2</td></tr><tr><td>2016-01-21T15:39:43+00:00</td><td>0.1</td></tr><tr><td>2016-01-21T15:40:05+00:00</td><td>0.0</td></tr><tr><td>2016-01-21T15:40:28+00:00</td><td>0.1</td></tr><tr><td>2016-01-21T15:40:50+00:00</td><td>5.5</td></tr><tr><td>2016-01-21T15:41:12+00:00</td><td>10.5</td></tr><tr><td>2016-01-21T15:41:35+00:00</td><td>15.7</td></tr><tr><td>2016-01-21T15:41:57+00:00</td><td>21.1</td></tr></table>"
      ],
      "text/plain": [
       "\n",
       "#<Daru::DataFrame:31469440 @name = 9ccc6dac-5bf2-4fcb-b5be-43d8ba6fb59d @size = 10>\n",
       "             NO / ppb \n",
       "2016-01-21        0.1 \n",
       "2016-01-21        0.2 \n",
       "2016-01-21        0.2 \n",
       "2016-01-21        0.1 \n",
       "2016-01-21        0.0 \n",
       "2016-01-21        0.1 \n",
       "2016-01-21        5.5 \n",
       "2016-01-21       10.5 \n",
       "2016-01-21       15.7 \n",
       "2016-01-21       21.1 \n"
      ]
     },
     "execution_count": 52,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "data = Daru::DataFrame.from_csv(input)\n",
    "data = data.recode_rows do |row|\n",
    "  row[\"NO / ppb\"] = row[\"NO / ppb\"].to_s.gsub(\",\", \".\").to_f\n",
    "  row\n",
    "end\n",
    "index = Daru::DateTimeIndex.new(data[timestamp])\n",
    "data.index = index\n",
    "data.delete_vector(timestamp)\n",
    "data.head"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# Plot"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 102,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "image/svg+xml": [
       "<?xml version=\"1.0\" encoding=\"utf-8\"  standalone=\"no\"?>\n",
       "<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n",
       " \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n",
       "<svg \n",
       " width=\"600\" height=\"480\"\n",
       " viewBox=\"0 0 600 480\"\n",
       " xmlns=\"http://www.w3.org/2000/svg\"\n",
       " xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n",
       ">\n",
       "\n",
       "<title>Gnuplot</title>\n",
       "<desc>Produced by GNUPLOT 5.0 patchlevel 1 </desc>\n",
       "\n",
       "<g id=\"gnuplot_canvas\">\n",
       "\n",
       "<rect x=\"0\" y=\"0\" width=\"600\" height=\"480\" fill=\"none\"/>\n",
       "<defs>\n",
       "\n",
       "\t<circle id='gpDot' r='0.5' stroke-width='0.5'/>\n",
       "\t<path id='gpPt0' stroke-width='0.222' stroke='currentColor' d='M-1,0 h2 M0,-1 v2'/>\n",
       "\t<path id='gpPt1' stroke-width='0.222' stroke='currentColor' d='M-1,-1 L1,1 M1,-1 L-1,1'/>\n",
       "\t<path id='gpPt2' stroke-width='0.222' stroke='currentColor' d='M-1,0 L1,0 M0,-1 L0,1 M-1,-1 L1,1 M-1,1 L1,-1'/>\n",
       "\t<rect id='gpPt3' stroke-width='0.222' stroke='currentColor' x='-1' y='-1' width='2' height='2'/>\n",
       "\t<rect id='gpPt4' stroke-width='0.222' stroke='currentColor' fill='currentColor' x='-1' y='-1' width='2' height='2'/>\n",
       "\t<circle id='gpPt5' stroke-width='0.222' stroke='currentColor' cx='0' cy='0' r='1'/>\n",
       "\t<use xlink:href='#gpPt5' id='gpPt6' fill='currentColor' stroke='none'/>\n",
       "\t<path id='gpPt7' stroke-width='0.222' stroke='currentColor' d='M0,-1.33 L-1.33,0.67 L1.33,0.67 z'/>\n",
       "\t<use xlink:href='#gpPt7' id='gpPt8' fill='currentColor' stroke='none'/>\n",
       "\t<use xlink:href='#gpPt7' id='gpPt9' stroke='currentColor' transform='rotate(180)'/>\n",
       "\t<use xlink:href='#gpPt9' id='gpPt10' fill='currentColor' stroke='none'/>\n",
       "\t<use xlink:href='#gpPt3' id='gpPt11' stroke='currentColor' transform='rotate(45)'/>\n",
       "\t<use xlink:href='#gpPt11' id='gpPt12' fill='currentColor' stroke='none'/>\n",
       "\t<path id='gpPt13' stroke-width='0.222' stroke='currentColor' d='M0,1.330 L1.265,0.411 L0.782,-1.067 L-0.782,-1.076 L-1.265,0.411 z'/>\n",
       "\t<use xlink:href='#gpPt13' id='gpPt14' fill='currentColor' stroke='none'/>\n",
       "\t<filter id='textbox' filterUnits='objectBoundingBox' x='0' y='0' height='1' width='1'>\n",
       "\t  <feFlood flood-color='white' flood-opacity='1' result='bgnd'/>\n",
       "\t  <feComposite in='SourceGraphic' in2='bgnd' operator='atop'/>\n",
       "\t</filter>\n",
       "\t<filter id='greybox' filterUnits='objectBoundingBox' x='0' y='0' height='1' width='1'>\n",
       "\t  <feFlood flood-color='lightgrey' flood-opacity='1' result='grey'/>\n",
       "\t  <feComposite in='SourceGraphic' in2='grey' operator='atop'/>\n",
       "\t</filter>\n",
       "</defs>\n",
       "<g fill=\"none\" color=\"white\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M71.9,444.0 L80.9,444.0 M575.0,444.0 L566.0,444.0  '/>\t<g transform=\"translate(63.6,448.5)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"end\">\n",
       "\t\t<text><tspan font-family=\"Arial\" > 0</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M71.9,358.5 L80.9,358.5 M575.0,358.5 L566.0,358.5  '/>\t<g transform=\"translate(63.6,363.0)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"end\">\n",
       "\t\t<text><tspan font-family=\"Arial\" > 50</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M71.9,273.1 L80.9,273.1 M575.0,273.1 L566.0,273.1  '/>\t<g transform=\"translate(63.6,277.6)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"end\">\n",
       "\t\t<text><tspan font-family=\"Arial\" > 100</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M71.9,187.6 L80.9,187.6 M575.0,187.6 L566.0,187.6  '/>\t<g transform=\"translate(63.6,192.1)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"end\">\n",
       "\t\t<text><tspan font-family=\"Arial\" > 150</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M71.9,102.2 L80.9,102.2 M575.0,102.2 L566.0,102.2  '/>\t<g transform=\"translate(63.6,106.7)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"end\">\n",
       "\t\t<text><tspan font-family=\"Arial\" > 200</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M71.9,16.7 L80.9,16.7 M575.0,16.7 L566.0,16.7  '/>\t<g transform=\"translate(63.6,21.2)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"end\">\n",
       "\t\t<text><tspan font-family=\"Arial\" > 250</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M71.9,444.0 L71.9,435.0 M71.9,16.7 L71.9,25.7  '/>\t<g transform=\"translate(71.9,466.5)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"middle\">\n",
       "\t\t<text><tspan font-family=\"Arial\" >15:30</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M83.1,444.0 L83.1,439.5 M83.1,16.7 L83.1,21.2 M94.3,444.0 L94.3,439.5 M94.3,16.7 L94.3,21.2\n",
       "\t\tM105.4,444.0 L105.4,439.5 M105.4,16.7 L105.4,21.2 M116.6,444.0 L116.6,439.5 M116.6,16.7 L116.6,21.2\n",
       "\t\tM127.8,444.0 L127.8,435.0 M127.8,16.7 L127.8,25.7  '/>\t<g transform=\"translate(127.8,466.5)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"middle\">\n",
       "\t\t<text><tspan font-family=\"Arial\" >15:40</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M139.0,444.0 L139.0,439.5 M139.0,16.7 L139.0,21.2 M150.2,444.0 L150.2,439.5 M150.2,16.7 L150.2,21.2\n",
       "\t\tM161.3,444.0 L161.3,439.5 M161.3,16.7 L161.3,21.2 M172.5,444.0 L172.5,439.5 M172.5,16.7 L172.5,21.2\n",
       "\t\tM183.7,444.0 L183.7,435.0 M183.7,16.7 L183.7,25.7  '/>\t<g transform=\"translate(183.7,466.5)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"middle\">\n",
       "\t\t<text><tspan font-family=\"Arial\" >15:50</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M194.9,444.0 L194.9,439.5 M194.9,16.7 L194.9,21.2 M206.1,444.0 L206.1,439.5 M206.1,16.7 L206.1,21.2\n",
       "\t\tM217.2,444.0 L217.2,439.5 M217.2,16.7 L217.2,21.2 M228.4,444.0 L228.4,439.5 M228.4,16.7 L228.4,21.2\n",
       "\t\tM239.6,444.0 L239.6,435.0 M239.6,16.7 L239.6,25.7  '/>\t<g transform=\"translate(239.6,466.5)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"middle\">\n",
       "\t\t<text><tspan font-family=\"Arial\" >16:00</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M250.8,444.0 L250.8,439.5 M250.8,16.7 L250.8,21.2 M262.0,444.0 L262.0,439.5 M262.0,16.7 L262.0,21.2\n",
       "\t\tM273.1,444.0 L273.1,439.5 M273.1,16.7 L273.1,21.2 M284.3,444.0 L284.3,439.5 M284.3,16.7 L284.3,21.2\n",
       "\t\tM295.5,444.0 L295.5,435.0 M295.5,16.7 L295.5,25.7  '/>\t<g transform=\"translate(295.5,466.5)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"middle\">\n",
       "\t\t<text><tspan font-family=\"Arial\" >16:10</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M306.7,444.0 L306.7,439.5 M306.7,16.7 L306.7,21.2 M317.9,444.0 L317.9,439.5 M317.9,16.7 L317.9,21.2\n",
       "\t\tM329.0,444.0 L329.0,439.5 M329.0,16.7 L329.0,21.2 M340.2,444.0 L340.2,439.5 M340.2,16.7 L340.2,21.2\n",
       "\t\tM351.4,444.0 L351.4,435.0 M351.4,16.7 L351.4,25.7  '/>\t<g transform=\"translate(351.4,466.5)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"middle\">\n",
       "\t\t<text><tspan font-family=\"Arial\" >16:20</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M362.6,444.0 L362.6,439.5 M362.6,16.7 L362.6,21.2 M373.8,444.0 L373.8,439.5 M373.8,16.7 L373.8,21.2\n",
       "\t\tM384.9,444.0 L384.9,439.5 M384.9,16.7 L384.9,21.2 M396.1,444.0 L396.1,439.5 M396.1,16.7 L396.1,21.2\n",
       "\t\tM407.3,444.0 L407.3,435.0 M407.3,16.7 L407.3,25.7  '/>\t<g transform=\"translate(407.3,466.5)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"middle\">\n",
       "\t\t<text><tspan font-family=\"Arial\" >16:30</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M418.5,444.0 L418.5,439.5 M418.5,16.7 L418.5,21.2 M429.7,444.0 L429.7,439.5 M429.7,16.7 L429.7,21.2\n",
       "\t\tM440.8,444.0 L440.8,439.5 M440.8,16.7 L440.8,21.2 M452.0,444.0 L452.0,439.5 M452.0,16.7 L452.0,21.2\n",
       "\t\tM463.2,444.0 L463.2,435.0 M463.2,16.7 L463.2,25.7  '/>\t<g transform=\"translate(463.2,466.5)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"middle\">\n",
       "\t\t<text><tspan font-family=\"Arial\" >16:40</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M474.4,444.0 L474.4,439.5 M474.4,16.7 L474.4,21.2 M485.6,444.0 L485.6,439.5 M485.6,16.7 L485.6,21.2\n",
       "\t\tM496.7,444.0 L496.7,439.5 M496.7,16.7 L496.7,21.2 M507.9,444.0 L507.9,439.5 M507.9,16.7 L507.9,21.2\n",
       "\t\tM519.1,444.0 L519.1,435.0 M519.1,16.7 L519.1,25.7  '/>\t<g transform=\"translate(519.1,466.5)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"middle\">\n",
       "\t\t<text><tspan font-family=\"Arial\" >16:50</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M530.3,444.0 L530.3,439.5 M530.3,16.7 L530.3,21.2 M541.5,444.0 L541.5,439.5 M541.5,16.7 L541.5,21.2\n",
       "\t\tM552.6,444.0 L552.6,439.5 M552.6,16.7 L552.6,21.2 M563.8,444.0 L563.8,439.5 M563.8,16.7 L563.8,21.2\n",
       "\t\tM575.0,444.0 L575.0,435.0 M575.0,16.7 L575.0,25.7  '/>\t<g transform=\"translate(575.0,466.5)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"middle\">\n",
       "\t\t<text><tspan font-family=\"Arial\" >17:00</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M71.9,16.7 L71.9,444.0 L575.0,444.0 L575.0,16.7 L71.9,16.7 Z  '/></g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<g transform=\"translate(17.6,230.4) rotate(270)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"middle\">\n",
       "\t\t<text><tspan font-family=\"Arial\" >Concentration [ppb]</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "</g>\n",
       "\t<g id=\"gnuplot_plot_1\" ><title>gnuplot_plot_1</title>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='rgb(148,   0, 211)'  d='M120.0,443.8 L122.1,443.7 L124.2,443.7 L126.2,443.8 L128.3,444.0 L130.4,443.8 L132.5,434.6 L134.5,426.1\n",
       "\t\tL136.7,417.2 L138.7,407.9 L140.8,396.7 L142.9,385.9 L144.9,379.9 L147.1,376.1 L149.1,373.6 L151.2,373.1\n",
       "\t\tL153.2,371.7 L155.4,371.5 L157.4,371.4 L159.5,371.5 L161.5,371.9 L163.7,339.9 L165.7,303.0 L167.9,306.8\n",
       "\t\tL169.9,309.1 L172.0,311.0 L174.0,312.9 L176.1,313.9 L178.2,315.8 L180.3,316.0 L182.3,317.5 L184.4,316.2\n",
       "\t\tL186.7,316.3 L188.7,316.5 L190.8,316.5 L192.8,316.7 L194.9,259.1 L197.0,253.1 L199.1,254.8 L201.1,254.1\n",
       "\t\tL203.3,253.6 L205.3,253.8 L207.5,252.6 L209.5,251.5 L211.6,251.0 L213.6,250.5 L215.7,250.7 L217.8,249.5\n",
       "\t\tL219.8,249.2 L221.9,249.0 L223.9,249.0 L226.1,247.8 L228.2,294.4 L230.3,247.8 L232.3,247.3 L234.4,246.8\n",
       "\t\tL236.4,246.2 L238.6,246.2 L240.6,245.4 L242.8,245.4 L244.8,244.5 L247.0,221.1 L249.0,178.9 L251.1,178.4\n",
       "\t\tL253.2,177.9 L255.3,177.9 L257.4,175.5 L259.4,175.3 L261.5,175.0 L263.6,141.0 L265.7,104.7 L267.8,106.4\n",
       "\t\tL269.9,105.6 L271.9,104.0 L274.0,102.7 L276.1,102.2 L278.2,101.5 L280.2,100.1 L282.3,100.8 L284.4,99.8\n",
       "\t\tL286.5,100.5 L288.6,98.6 L290.7,97.9 L292.8,96.9 L294.8,100.5 L296.9,97.0 L299.0,94.6 L301.1,93.8\n",
       "\t\tL303.1,95.2 L305.2,95.0 L307.2,94.3 L309.4,93.8 L311.5,93.4 L313.7,93.4 L315.7,93.3 L317.8,164.9\n",
       "\t\tL319.8,164.4 L322.0,163.5 L324.0,162.8 L326.1,164.7 L328.2,164.7 L330.3,163.9 L332.4,162.7 L334.4,166.1\n",
       "\t\tL336.6,164.5 L338.7,163.3 L340.8,164.7 L342.9,162.8 L345.1,168.5 L347.1,235.3 L349.3,235.3 L351.4,233.4\n",
       "\t\tL353.4,236.0 L355.5,234.5 L357.6,235.5 L359.7,234.5 L361.8,263.9 L363.9,305.0 L365.9,304.2 L368.1,304.7\n",
       "\t\tL370.1,304.2 L372.3,303.7 L374.3,304.5 L376.5,305.0 L378.5,303.8 L380.6,305.2 L382.7,305.6 L384.8,304.7\n",
       "\t\tL386.9,304.5 L389.0,305.7 L391.1,306.6 L393.3,306.1 L395.4,305.6 L397.5,304.7 L399.6,306.2 L401.7,306.2\n",
       "\t\tL403.8,306.1 L405.9,305.9 L408.0,305.0 L410.0,306.6 L412.1,306.9 L414.3,305.4 L416.4,306.2 L418.5,307.6\n",
       "\t\tL420.5,306.2 L422.7,306.8 L424.7,308.1 L426.9,305.6 L428.9,306.9 L431.0,306.6 L433.1,307.3 L435.3,363.8\n",
       "\t\tL437.3,376.0 L439.4,374.9 L441.5,374.3 L443.5,374.4 L445.7,374.6 L447.7,374.8 L449.8,374.6 L451.9,375.3\n",
       "\t\tL454.0,375.3 L456.0,396.8 L458.2,396.8 L460.2,396.0 L462.4,396.3 L464.4,396.3 L466.5,396.0 L468.6,410.0\n",
       "\t\tL470.7,410.0 L472.7,410.2 L474.8,409.8 L477.0,410.3 L479.1,410.0 L481.3,427.2 L483.3,427.9 L485.4,428.1\n",
       "\t\tL487.4,427.8 L489.6,427.8 L491.6,427.6 L493.7,436.7 L495.8,437.5 L498.0,438.0 L500.0,438.0 L502.3,437.8\n",
       "\t\tL504.4,438.2 L506.6,439.9 L508.7,441.8 L511.1,442.1 L513.2,442.6 L515.3,442.5 L517.3,442.6 L519.5,442.8\n",
       "\t\tL521.5,443.0 L523.7,443.1 L525.7,443.3 L527.9,443.0 L529.9,443.3 L532.1,443.3 L534.1,443.5 L536.2,443.3\n",
       "\t\tL538.3,443.5 L540.4,443.7 L542.5,443.5 L544.6,443.5 L545.2,443.5  '/></g>\n",
       "\t</g>\n",
       "\t<g id=\"gnuplot_plot_2\" ><title>gnuplot_plot_2</title>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='rgb(  0, 158, 115)'  d='M513.5,444.0 L513.6,16.7  '/></g>\n",
       "\t</g>\n",
       "\t<g id=\"gnuplot_plot_3\" ><title>gnuplot_plot_3</title>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='rgb( 86, 180, 233)'  d='M519.1,444.0 L519.2,16.7  '/></g>\n",
       "\t</g>\n",
       "<g fill=\"none\" color=\"white\" stroke=\"rgb( 86, 180, 233)\" stroke-width=\"2.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"2.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"black\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M71.9,16.7 L71.9,444.0 L575.0,444.0 L575.0,16.7 L71.9,16.7 Z  '/></g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "</g>\n",
       "</g>\n",
       "</svg>\n",
       "\n"
      ],
      "text/plain": [
       "#<GnuplotRB::Plot:0x000000041ea858 @options=Hamster::Hash[:xdata => \"time\", :format_x => \"%H:%M\", :timefmt => \"%Y-%m-%dT%H:%M:%S\", :ylabel => \"Concentration [ppb]\"], @datasets=Hamster::Vector[#<GnuplotRB::Dataset:0x000000041ea628 @type=:datablock, @data=#<GnuplotRB::Datablock:0x000000041ea1a0 @stored_in_file=false, @data=\"2016-01-21T15:38:36+00:00 0.1\\n2016-01-21T15:38:59+00:00 0.2\\n2016-01-21T15:39:21+00:00 0.2\\n2016-01-21T15:39:43+00:00 0.1\\n2016-01-21T15:40:05+00:00 0.0\\n2016-01-21T15:40:28+00:00 0.1\\n2016-01-21T15:40:50+00:00 5.5\\n2016-01-21T15:41:12+00:00 10.5\\n2016-01-21T15:41:35+00:00 15.7\\n2016-01-21T15:41:57+00:00 21.1\\n2016-01-21T15:42:19+00:00 27.7\\n2016-01-21T15:42:42+00:00 34.0\\n2016-01-21T15:43:04+00:00 37.5\\n2016-01-21T15:43:27+00:00 39.7\\n2016-01-21T15:43:49+00:00 41.2\\n2016-01-21T15:44:11+00:00 41.5\\n2016-01-21T15:44:33+00:00 42.3\\n2016-01-21T15:44:56+00:00 42.4\\n2016-01-21T15:45:18+00:00 42.5\\n2016-01-21T15:45:40+00:00 42.4\\n2016-01-21T15:46:02+00:00 42.2\\n2016-01-21T15:46:25+00:00 60.9\\n2016-01-21T15:46:47+00:00 82.5\\n2016-01-21T15:47:10+00:00 80.3\\n2016-01-21T15:47:32+00:00 78.9\\n2016-01-21T15:47:54+00:00 77.8\\n2016-01-21T15:48:16+00:00 76.7\\n2016-01-21T15:48:38+00:00 76.1\\n2016-01-21T15:49:01+00:00 75.0\\n2016-01-21T15:49:23+00:00 74.9\\n2016-01-21T15:49:45+00:00 74.0\\n2016-01-21T15:50:08+00:00 74.8\\n2016-01-21T15:50:32+00:00 74.7\\n2016-01-21T15:50:54+00:00 74.6\\n2016-01-21T15:51:16+00:00 74.6\\n2016-01-21T15:51:38+00:00 74.5\\n2016-01-21T15:52:00+00:00 108.2\\n2016-01-21T15:52:23+00:00 111.7\\n2016-01-21T15:52:45+00:00 110.7\\n2016-01-21T15:53:07+00:00 111.1\\n2016-01-21T15:53:30+00:00 111.4\\n2016-01-21T15:53:52+00:00 111.3\\n2016-01-21T15:54:15+00:00 112.0\\n2016-01-21T15:54:37+00:00 112.6\\n2016-01-21T15:54:59+00:00 112.9\\n2016-01-21T15:55:21+00:00 113.2\\n2016-01-21T15:55:44+00:00 113.1\\n2016-01-21T15:56:06+00:00 113.8\\n2016-01-21T15:56:28+00:00 114.0\\n2016-01-21T15:56:50+00:00 114.1\\n2016-01-21T15:57:12+00:00 114.1\\n2016-01-21T15:57:35+00:00 114.8\\n2016-01-21T15:57:58+00:00 87.5\\n2016-01-21T15:58:20+00:00 114.8\\n2016-01-21T15:58:42+00:00 115.1\\n2016-01-21T15:59:04+00:00 115.4\\n2016-01-21T15:59:26+00:00 115.7\\n2016-01-21T15:59:49+00:00 115.7\\n2016-01-21T16:00:11+00:00 116.2\\n2016-01-21T16:00:34+00:00 116.2\\n2016-01-21T16:00:56+00:00 116.7\\n2016-01-21T16:01:19+00:00 130.4\\n2016-01-21T16:01:41+00:00 155.1\\n2016-01-21T16:02:03+00:00 155.4\\n2016-01-21T16:02:26+00:00 155.7\\n2016-01-21T16:02:49+00:00 155.7\\n2016-01-21T16:03:11+00:00 157.1\\n2016-01-21T16:03:33+00:00 157.2\\n2016-01-21T16:03:55+00:00 157.4\\n2016-01-21T16:04:18+00:00 177.3\\n2016-01-21T16:04:40+00:00 198.5\\n2016-01-21T16:05:03+00:00 197.5\\n2016-01-21T16:05:25+00:00 198.0\\n2016-01-21T16:05:47+00:00 198.9\\n2016-01-21T16:06:09+00:00 199.7\\n2016-01-21T16:06:32+00:00 200.0\\n2016-01-21T16:06:54+00:00 200.4\\n2016-01-21T16:07:16+00:00 201.2\\n2016-01-21T16:07:38+00:00 200.8\\n2016-01-21T16:08:01+00:00 201.4\\n2016-01-21T16:08:23+00:00 201.0\\n2016-01-21T16:08:46+00:00 202.1\\n2016-01-21T16:09:08+00:00 202.5\\n2016-01-21T16:09:31+00:00 203.1\\n2016-01-21T16:09:53+00:00 201.0\\n2016-01-21T16:10:15+00:00 203.0\\n2016-01-21T16:10:38+00:00 204.4\\n2016-01-21T16:11:00+00:00 204.9\\n2016-01-21T16:11:22+00:00 204.1\\n2016-01-21T16:11:44+00:00 204.2\\n2016-01-21T16:12:06+00:00 204.6\\n2016-01-21T16:12:29+00:00 204.9\\n2016-01-21T16:12:52+00:00 205.1\\n2016-01-21T16:13:15+00:00 205.1\\n2016-01-21T16:13:37+00:00 205.2\\n2016-01-21T16:13:59+00:00 163.3\\n2016-01-21T16:14:21+00:00 163.6\\n2016-01-21T16:14:44+00:00 164.1\\n2016-01-21T16:15:06+00:00 164.5\\n2016-01-21T16:15:28+00:00 163.4\\n2016-01-21T16:15:51+00:00 163.4\\n2016-01-21T16:16:14+00:00 163.9\\n2016-01-21T16:16:36+00:00 164.6\\n2016-01-21T16:16:58+00:00 162.6\\n2016-01-21T16:17:21+00:00 163.5\\n2016-01-21T16:17:44+00:00 164.2\\n2016-01-21T16:18:06+00:00 163.4\\n2016-01-21T16:18:29+00:00 164.5\\n2016-01-21T16:18:52+00:00 161.2\\n2016-01-21T16:19:14+00:00 122.1\\n2016-01-21T16:19:37+00:00 122.1\\n2016-01-21T16:20:00+00:00 123.2\\n2016-01-21T16:20:22+00:00 121.7\\n2016-01-21T16:20:44+00:00 122.6\\n2016-01-21T16:21:07+00:00 122.0\\n2016-01-21T16:21:29+00:00 122.6\\n2016-01-21T16:21:52+00:00 105.4\\n2016-01-21T16:22:14+00:00 81.3\\n2016-01-21T16:22:36+00:00 81.8\\n2016-01-21T16:22:59+00:00 81.5\\n2016-01-21T16:23:21+00:00 81.8\\n2016-01-21T16:23:44+00:00 82.1\\n2016-01-21T16:24:06+00:00 81.6\\n2016-01-21T16:24:29+00:00 81.3\\n2016-01-21T16:24:51+00:00 82.0\\n2016-01-21T16:25:13+00:00 81.2\\n2016-01-21T16:25:36+00:00 81.0\\n2016-01-21T16:25:59+00:00 81.5\\n2016-01-21T16:26:21+00:00 81.6\\n2016-01-21T16:26:44+00:00 80.9\\n2016-01-21T16:27:06+00:00 80.4\\n2016-01-21T16:27:30+00:00 80.7\\n2016-01-21T16:27:52+00:00 81.0\\n2016-01-21T16:28:15+00:00 81.5\\n2016-01-21T16:28:37+00:00 80.6\\n2016-01-21T16:29:00+00:00 80.6\\n2016-01-21T16:29:22+00:00 80.7\\n2016-01-21T16:29:45+00:00 80.8\\n2016-01-21T16:30:07+00:00 81.3\\n2016-01-21T16:30:29+00:00 80.4\\n2016-01-21T16:30:52+00:00 80.2\\n2016-01-21T16:31:15+00:00 81.1\\n2016-01-21T16:31:38+00:00 80.6\\n2016-01-21T16:32:00+00:00 79.8\\n2016-01-21T16:32:22+00:00 80.6\\n2016-01-21T16:32:45+00:00 80.3\\n2016-01-21T16:33:07+00:00 79.5\\n2016-01-21T16:33:30+00:00 81.0\\n2016-01-21T16:33:52+00:00 80.2\\n2016-01-21T16:34:14+00:00 80.4\\n2016-01-21T16:34:37+00:00 80.0\\n2016-01-21T16:35:00+00:00 46.9\\n2016-01-21T16:35:22+00:00 39.8\\n2016-01-21T16:35:45+00:00 40.4\\n2016-01-21T16:36:07+00:00 40.8\\n2016-01-21T16:36:29+00:00 40.7\\n2016-01-21T16:36:52+00:00 40.6\\n2016-01-21T16:37:14+00:00 40.5\\n2016-01-21T16:37:36+00:00 40.6\\n2016-01-21T16:37:59+00:00 40.2\\n2016-01-21T16:38:21+00:00 40.2\\n2016-01-21T16:38:43+00:00 27.6\\n2016-01-21T16:39:06+00:00 27.6\\n2016-01-21T16:39:28+00:00 28.1\\n2016-01-21T16:39:51+00:00 27.9\\n2016-01-21T16:40:13+00:00 27.9\\n2016-01-21T16:40:35+00:00 28.1\\n2016-01-21T16:40:58+00:00 19.9\\n2016-01-21T16:41:20+00:00 19.9\\n2016-01-21T16:41:42+00:00 19.8\\n2016-01-21T16:42:05+00:00 20.0\\n2016-01-21T16:42:28+00:00 19.7\\n2016-01-21T16:42:51+00:00 19.9\\n2016-01-21T16:43:14+00:00 9.8\\n2016-01-21T16:43:36+00:00 9.4\\n2016-01-21T16:43:58+00:00 9.3\\n2016-01-21T16:44:20+00:00 9.5\\n2016-01-21T16:44:43+00:00 9.5\\n2016-01-21T16:45:05+00:00 9.6\\n2016-01-21T16:45:27+00:00 4.3\\n2016-01-21T16:45:50+00:00 3.8\\n2016-01-21T16:46:13+00:00 3.5\\n2016-01-21T16:46:35+00:00 3.5\\n2016-01-21T16:47:00+00:00 3.6\\n2016-01-21T16:47:22+00:00 3.4\\n2016-01-21T16:47:46+00:00 2.4\\n2016-01-21T16:48:08+00:00 1.3\\n2016-01-21T16:48:34+00:00 1.1\\n2016-01-21T16:48:57+00:00 0.8\\n2016-01-21T16:49:19+00:00 0.9\\n2016-01-21T16:49:41+00:00 0.8\\n2016-01-21T16:50:04+00:00 0.7\\n2016-01-21T16:50:26+00:00 0.6\\n2016-01-21T16:50:49+00:00 0.5\\n2016-01-21T16:51:11+00:00 0.4\\n2016-01-21T16:51:34+00:00 0.6\\n2016-01-21T16:51:56+00:00 0.4\\n2016-01-21T16:52:19+00:00 0.4\\n2016-01-21T16:52:41+00:00 0.3\\n2016-01-21T16:53:04+00:00 0.4\\n2016-01-21T16:53:26+00:00 0.3\\n2016-01-21T16:53:49+00:00 0.2\\n2016-01-21T16:54:11+00:00 0.3\\n2016-01-21T16:54:34+00:00 0.3\\n2016-01-21T16:54:40+00:00 0.3\\n\">, @options=Hamster::Hash[:with => \"lines\", :title => \"\", :using => \"1:2\"]>, #<GnuplotRB::Dataset:0x000000040a6f50 @type=:datablock, @data=#<GnuplotRB::Datablock:0x000000040a6d70 @stored_in_file=false, @data=\"2016-01-21T16:49:00+00:00 0\\n2016-01-21T16:49:01+00:00 250\\n\">, @options=Hamster::Hash[:with => \"lines\", :title => \"\", :using => \"1:2\"]>, #<GnuplotRB::Dataset:0x000000040a58f8 @type=:datablock, @data=#<GnuplotRB::Datablock:0x000000040a56a0 @stored_in_file=false, @data=\"2016-01-21T16:50:00+00:00 0\\n2016-01-21T16:50:01+00:00 250\\n\">, @options=Hamster::Hash[:with => \"lines\", :title => \"\", :using => \"1:2\"]>], @cmd=\"plot \">"
      ]
     },
     "execution_count": 102,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "start = \"2016-01-21 16:49\"\n",
    "stop = \"2016-01-21 16:50\"\n",
    "\n",
    "vstart = Daru::Vector.new([0,250], index: [DateTime.parse(start), DateTime.parse(start + \":01\")])\n",
    "vstop = Daru::Vector.new([0,250], index: [DateTime.parse(stop), DateTime.parse(stop + \":01\")])\n",
    "\n",
    "GnuplotRB::Plot.new(\n",
    "  [data, with: \"lines\", title: \"\"],\n",
    "  [vstart, with: \"lines\", title: \"\"],\n",
    "  [vstop, with: \"lines\", title: \"\"],\n",
    "  ylabel: \"Concentration [ppb]\",\n",
    "  format_x: \"%H:%M\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 55,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table><tr><th colspan=\"2\">Daru::Vector:26482220  size: 1</th></tr><tr><th> </th><th>mean</th></tr><tr><td>NO / ppb</td><td>200.65600000000003</td></tr></table>"
      ],
      "text/plain": [
       "\n",
       "#<Daru::Vector:26482220 @name = mean @size = 1 >\n",
       "                                 mean\n",
       "          NO / ppb 200.65600000000003\n"
      ]
     },
     "execution_count": 55,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "data.row[start..stop].mean"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 133,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table><tr><th colspan=\"5\">Daru::DataFrame:33539880  rows: 10  cols: 4<tr><th></th><th>start</th><th>stop</th><th>mean</th><th>std</th></tr><tr><td>0.11919868665889212</td><td>2016-01-21 16:05</td><td>2016-01-21 16:13</td><td></td><td></td></tr><tr><td>0.09563777666432749</td><td>2016-01-21 16:14</td><td>2016-01-21 16:18</td><td></td><td></td></tr><tr><td>0.0719386795143695</td><td>2016-01-21 16:19</td><td>2016-01-21 16:21</td><td></td><td></td></tr><tr><td>0.04810017591058823</td><td>2016-01-21 16:23</td><td>2016-01-21 16:34</td><td></td><td></td></tr><tr><td>0.02436152386020471</td><td>2016-01-21 16:36</td><td>2016-01-21 16:38</td><td></td><td></td></tr><tr><td>0.01694972144909683</td><td>2016-01-21 16:39</td><td>2016-01-21 16:40</td><td></td><td></td></tr><tr><td>0.012114118377481482</td><td>2016-01-21 16:41</td><td>2016-01-21 16:42</td><td></td><td></td></tr><tr><td>0.006061549225203855</td><td>2016-01-21 16:44</td><td>2016-01-21 16:45</td><td></td><td></td></tr><tr><td>0.002425698577514091</td><td>2016-01-21 16:46</td><td>2016-01-21 16:47</td><td></td><td></td></tr><tr><td>0.0</td><td>2016-01-21 16:49</td><td>2016-01-21 16:50</td><td></td><td></td></tr></table>"
      ],
      "text/plain": [
       "\n",
       "#<Daru::DataFrame:33539880 @name = f2bb342c-5467-445d-aa30-915850e79a86 @size = 10>\n",
       "                start       stop       mean        std \n",
       "0.11919868 2016-01-21 2016-01-21        nil        nil \n",
       "0.09563777 2016-01-21 2016-01-21        nil        nil \n",
       "0.07193867 2016-01-21 2016-01-21        nil        nil \n",
       "0.04810017 2016-01-21 2016-01-21        nil        nil \n",
       "0.02436152 2016-01-21 2016-01-21        nil        nil \n",
       "0.01694972 2016-01-21 2016-01-21        nil        nil \n",
       "0.01211411 2016-01-21 2016-01-21        nil        nil \n",
       "0.00606154 2016-01-21 2016-01-21        nil        nil \n",
       "0.00242569 2016-01-21 2016-01-21        nil        nil \n",
       "       0.0 2016-01-21 2016-01-21        nil        nil \n"
      ]
     },
     "execution_count": 133,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "c = 8.1770299048\n",
    "no = [50, 40, 30, 20, 10.1, 7, 5, 2.5, 1, 0]\n",
    "null = [ 3380, 3380, 3380, 3380, 3380, 3370, 3370, 3370, 3370, 3370]\n",
    "concentration = (0..(no.length-1)).map do |i|\n",
    "  c*no[i].to_f/(no[i] + null[i])\n",
    "end\n",
    "\n",
    "cld = Daru::DataFrame.new({\n",
    "  start: [\"2016-01-21 16:05\", \"2016-01-21 16:14\", \"2016-01-21 16:19\",\"2016-01-21 16:23\",\"2016-01-21 16:36\",\n",
    "    \"2016-01-21 16:39\", \"2016-01-21 16:41\", \"2016-01-21 16:44\", \"2016-01-21 16:46\", \"2016-01-21 16:49\"], \n",
    "  stop: [\"2016-01-21 16:13\", \"2016-01-21 16:18\", \"2016-01-21 16:21\",\"2016-01-21 16:34\",\"2016-01-21 16:38\",\n",
    "    \"2016-01-21 16:40\", \"2016-01-21 16:42\", \"2016-01-21 16:45\", \"2016-01-21 16:47\", \"2016-01-21 16:50\"],\n",
    "  mean: [],\n",
    "  std: []}, \n",
    "  index: concentration,\n",
    "  order: [:start, :stop, :mean])"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 134,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<table><tr><th colspan=\"5\">Daru::DataFrame:33164560  rows: 10  cols: 4<tr><th></th><th>start</th><th>stop</th><th>mean</th><th>std</th></tr><tr><td>0.11919868665889212</td><td>2016-01-21 16:05</td><td>2016-01-21 16:13</td><td>200.65600000000003</td><td>1.6254238421613807</td></tr><tr><td>0.09563777666432749</td><td>2016-01-21 16:14</td><td>2016-01-21 16:18</td><td>163.6076923076923</td><td>0.25581983305101413</td></tr><tr><td>0.0719386795143695</td><td>2016-01-21 16:19</td><td>2016-01-21 16:21</td><td>120.21249999999999</td><td>2.122451202535138</td></tr><tr><td>0.04810017591058823</td><td>2016-01-21 16:23</td><td>2016-01-21 16:34</td><td>80.86129032258063</td><td>0.11412852774981622</td></tr><tr><td>0.02436152386020471</td><td>2016-01-21 16:36</td><td>2016-01-21 16:38</td><td>38.9</td><td>1.6161020123388603</td></tr><tr><td>0.01694972144909683</td><td>2016-01-21 16:39</td><td>2016-01-21 16:40</td><td>26.583333333333332</td><td>1.338759790917616</td></tr><tr><td>0.012114118377481482</td><td>2016-01-21 16:41</td><td>2016-01-21 16:42</td><td>19.860000000000003</td><td>0.050990195135927806</td></tr><tr><td>0.006061549225203855</td><td>2016-01-21 16:44</td><td>2016-01-21 16:45</td><td>7.339999999999999</td><td>1.345585374474619</td></tr><tr><td>0.002425698577514091</td><td>2016-01-21 16:46</td><td>2016-01-21 16:47</td><td>3.28</td><td>0.2222611077089287</td></tr><tr><td>0.0</td><td>2016-01-21 16:49</td><td>2016-01-21 16:50</td><td>0.7000000000000001</td><td>0.07071067811865475</td></tr></table>"
      ],
      "text/plain": [
       "\n",
       "#<Daru::DataFrame:33164560 @name = f2bb342c-5467-445d-aa30-915850e79a86 @size = 10>\n",
       "                start       stop       mean        std \n",
       "0.11919868 2016-01-21 2016-01-21 200.656000 1.62542384 \n",
       "0.09563777 2016-01-21 2016-01-21 163.607692 0.25581983 \n",
       "0.07193867 2016-01-21 2016-01-21 120.212499 2.12245120 \n",
       "0.04810017 2016-01-21 2016-01-21 80.8612903 0.11412852 \n",
       "0.02436152 2016-01-21 2016-01-21       38.9 1.61610201 \n",
       "0.01694972 2016-01-21 2016-01-21 26.5833333 1.33875979 \n",
       "0.01211411 2016-01-21 2016-01-21 19.8600000 0.05099019 \n",
       "0.00606154 2016-01-21 2016-01-21 7.33999999 1.34558537 \n",
       "0.00242569 2016-01-21 2016-01-21       3.28 0.22226110 \n",
       "       0.0 2016-01-21 2016-01-21 0.70000000 0.07071067 \n"
      ]
     },
     "execution_count": 134,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "cld = cld.recode_rows do |row|\n",
    "  tmp = data.row[row[:start]..row[:stop]]\n",
    "  row[:mean] = tmp[\"NO / ppb\"].mean\n",
    "  row[:std] = tmp[\"NO / ppb\"].std/Math.sqrt(tmp[\"NO / ppb\"].count).to_f\n",
    "  row\n",
    "end"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 137,
   "metadata": {
    "collapsed": false
   },
   "outputs": [
    {
     "data": {
      "image/svg+xml": [
       "<?xml version=\"1.0\" encoding=\"utf-8\"  standalone=\"no\"?>\n",
       "<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n",
       " \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\n",
       "<svg \n",
       " width=\"600\" height=\"480\"\n",
       " viewBox=\"0 0 600 480\"\n",
       " xmlns=\"http://www.w3.org/2000/svg\"\n",
       " xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n",
       ">\n",
       "\n",
       "<title>Gnuplot</title>\n",
       "<desc>Produced by GNUPLOT 5.0 patchlevel 1 </desc>\n",
       "\n",
       "<g id=\"gnuplot_canvas\">\n",
       "\n",
       "<rect x=\"0\" y=\"0\" width=\"600\" height=\"480\" fill=\"none\"/>\n",
       "<defs>\n",
       "\n",
       "\t<circle id='gpDot' r='0.5' stroke-width='0.5'/>\n",
       "\t<path id='gpPt0' stroke-width='0.222' stroke='currentColor' d='M-1,0 h2 M0,-1 v2'/>\n",
       "\t<path id='gpPt1' stroke-width='0.222' stroke='currentColor' d='M-1,-1 L1,1 M1,-1 L-1,1'/>\n",
       "\t<path id='gpPt2' stroke-width='0.222' stroke='currentColor' d='M-1,0 L1,0 M0,-1 L0,1 M-1,-1 L1,1 M-1,1 L1,-1'/>\n",
       "\t<rect id='gpPt3' stroke-width='0.222' stroke='currentColor' x='-1' y='-1' width='2' height='2'/>\n",
       "\t<rect id='gpPt4' stroke-width='0.222' stroke='currentColor' fill='currentColor' x='-1' y='-1' width='2' height='2'/>\n",
       "\t<circle id='gpPt5' stroke-width='0.222' stroke='currentColor' cx='0' cy='0' r='1'/>\n",
       "\t<use xlink:href='#gpPt5' id='gpPt6' fill='currentColor' stroke='none'/>\n",
       "\t<path id='gpPt7' stroke-width='0.222' stroke='currentColor' d='M0,-1.33 L-1.33,0.67 L1.33,0.67 z'/>\n",
       "\t<use xlink:href='#gpPt7' id='gpPt8' fill='currentColor' stroke='none'/>\n",
       "\t<use xlink:href='#gpPt7' id='gpPt9' stroke='currentColor' transform='rotate(180)'/>\n",
       "\t<use xlink:href='#gpPt9' id='gpPt10' fill='currentColor' stroke='none'/>\n",
       "\t<use xlink:href='#gpPt3' id='gpPt11' stroke='currentColor' transform='rotate(45)'/>\n",
       "\t<use xlink:href='#gpPt11' id='gpPt12' fill='currentColor' stroke='none'/>\n",
       "\t<path id='gpPt13' stroke-width='0.222' stroke='currentColor' d='M0,1.330 L1.265,0.411 L0.782,-1.067 L-0.782,-1.076 L-1.265,0.411 z'/>\n",
       "\t<use xlink:href='#gpPt13' id='gpPt14' fill='currentColor' stroke='none'/>\n",
       "\t<filter id='textbox' filterUnits='objectBoundingBox' x='0' y='0' height='1' width='1'>\n",
       "\t  <feFlood flood-color='white' flood-opacity='1' result='bgnd'/>\n",
       "\t  <feComposite in='SourceGraphic' in2='bgnd' operator='atop'/>\n",
       "\t</filter>\n",
       "\t<filter id='greybox' filterUnits='objectBoundingBox' x='0' y='0' height='1' width='1'>\n",
       "\t  <feFlood flood-color='lightgrey' flood-opacity='1' result='grey'/>\n",
       "\t  <feComposite in='SourceGraphic' in2='grey' operator='atop'/>\n",
       "\t</filter>\n",
       "</defs>\n",
       "<g fill=\"none\" color=\"white\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M53.9,422.4 L62.9,422.4 M575.0,422.4 L566.0,422.4  '/>\t<g transform=\"translate(45.6,426.9)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"end\">\n",
       "\t\t<text><tspan font-family=\"Arial\" > 0</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M53.9,341.3 L62.9,341.3 M575.0,341.3 L566.0,341.3  '/>\t<g transform=\"translate(45.6,345.8)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"end\">\n",
       "\t\t<text><tspan font-family=\"Arial\" > 50</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M53.9,260.1 L62.9,260.1 M575.0,260.1 L566.0,260.1  '/>\t<g transform=\"translate(45.6,264.6)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"end\">\n",
       "\t\t<text><tspan font-family=\"Arial\" > 100</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M53.9,179.0 L62.9,179.0 M575.0,179.0 L566.0,179.0  '/>\t<g transform=\"translate(45.6,183.5)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"end\">\n",
       "\t\t<text><tspan font-family=\"Arial\" > 150</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M53.9,97.8 L62.9,97.8 M575.0,97.8 L566.0,97.8  '/>\t<g transform=\"translate(45.6,102.3)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"end\">\n",
       "\t\t<text><tspan font-family=\"Arial\" > 200</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M53.9,16.7 L62.9,16.7 M575.0,16.7 L566.0,16.7  '/>\t<g transform=\"translate(45.6,21.2)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"end\">\n",
       "\t\t<text><tspan font-family=\"Arial\" > 250</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M53.9,422.4 L53.9,413.4 M53.9,16.7 L53.9,25.7  '/>\t<g transform=\"translate(53.9,444.9)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"middle\">\n",
       "\t\t<text><tspan font-family=\"Arial\" > 0</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M140.8,422.4 L140.8,413.4 M140.8,16.7 L140.8,25.7  '/>\t<g transform=\"translate(140.8,444.9)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"middle\">\n",
       "\t\t<text><tspan font-family=\"Arial\" > 0.02</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M227.6,422.4 L227.6,413.4 M227.6,16.7 L227.6,25.7  '/>\t<g transform=\"translate(227.6,444.9)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"middle\">\n",
       "\t\t<text><tspan font-family=\"Arial\" > 0.04</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M314.5,422.4 L314.5,413.4 M314.5,16.7 L314.5,25.7  '/>\t<g transform=\"translate(314.5,444.9)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"middle\">\n",
       "\t\t<text><tspan font-family=\"Arial\" > 0.06</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M401.3,422.4 L401.3,413.4 M401.3,16.7 L401.3,25.7  '/>\t<g transform=\"translate(401.3,444.9)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"middle\">\n",
       "\t\t<text><tspan font-family=\"Arial\" > 0.08</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M488.2,422.4 L488.2,413.4 M488.2,16.7 L488.2,25.7  '/>\t<g transform=\"translate(488.2,444.9)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"middle\">\n",
       "\t\t<text><tspan font-family=\"Arial\" > 0.1</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M575.0,422.4 L575.0,413.4 M575.0,16.7 L575.0,25.7  '/>\t<g transform=\"translate(575.0,444.9)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"middle\">\n",
       "\t\t<text><tspan font-family=\"Arial\" > 0.12</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M53.9,16.7 L53.9,422.4 L575.0,422.4 L575.0,16.7 L53.9,16.7 Z  '/></g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<g transform=\"translate(314.4,471.9)\" stroke=\"none\" fill=\"black\" font-family=\"Arial\" font-size=\"12.00\"  text-anchor=\"middle\">\n",
       "\t\t<text><tspan font-family=\"Arial\" >c(NO) [ppm]</tspan></text>\n",
       "\t</g>\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "</g>\n",
       "\t<g id=\"gnuplot_plot_1\" ><title>gnuplot_plot_1</title>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='rgb(148,   0, 211)'  d='M571.5,99.4 L571.5,94.1 M567.0,99.4 L575.0,99.4 M567.0,94.1 L575.0,94.1 M469.2,157.3 L469.2,156.5\n",
       "\t\tM464.7,157.3 L473.7,157.3 M464.7,156.5 L473.7,156.5 M366.3,230.8 L366.3,223.9 M361.8,230.8 L370.8,230.8\n",
       "\t\tM361.8,223.9 L370.8,223.9 M262.8,291.4 L262.8,291.0 M258.3,291.4 L267.3,291.4 M258.3,291.0 L267.3,291.0\n",
       "\t\tM159.7,361.9 L159.7,356.7 M155.2,361.9 L164.2,361.9 M155.2,356.7 L164.2,356.7 M127.5,381.4 L127.5,377.1\n",
       "\t\tM123.0,381.4 L132.0,381.4 M123.0,377.1 L132.0,377.1 M106.5,390.3 L106.5,390.1 M102.0,390.3 L111.0,390.3\n",
       "\t\tM102.0,390.1 L111.0,390.1 M80.2,412.7 L80.2,408.3 M75.7,412.7 L84.7,412.7 M75.7,408.3 L84.7,408.3\n",
       "\t\tM64.4,417.4 L64.4,416.7 M59.9,417.4 L68.9,417.4 M59.9,416.7 L68.9,416.7 M53.9,421.4 L53.9,421.1\n",
       "\t\tM53.9,421.4 L58.4,421.4 M53.9,421.1 L58.4,421.1  '/>\t<g onmousemove=\"gnuplot_svg.showHypertext(evt,'')\" onmouseout=\"gnuplot_svg.hideHypertext()\"><title> </title>\n",
       "\t<use xlink:href='#gpPt0' transform='translate(571.5,96.8) scale(4.50)' color='rgb(148,   0, 211)'/></g>\n",
       "\t<use xlink:href='#gpPt0' transform='translate(469.2,156.9) scale(4.50)' color='rgb(148,   0, 211)'/>\n",
       "\t<use xlink:href='#gpPt0' transform='translate(366.3,227.3) scale(4.50)' color='rgb(148,   0, 211)'/>\n",
       "\t<use xlink:href='#gpPt0' transform='translate(262.8,291.2) scale(4.50)' color='rgb(148,   0, 211)'/>\n",
       "\t<use xlink:href='#gpPt0' transform='translate(159.7,359.3) scale(4.50)' color='rgb(148,   0, 211)'/>\n",
       "\t<use xlink:href='#gpPt0' transform='translate(127.5,379.3) scale(4.50)' color='rgb(148,   0, 211)'/>\n",
       "\t<use xlink:href='#gpPt0' transform='translate(106.5,390.2) scale(4.50)' color='rgb(148,   0, 211)'/>\n",
       "\t<use xlink:href='#gpPt0' transform='translate(80.2,410.5) scale(4.50)' color='rgb(148,   0, 211)'/>\n",
       "\t<use xlink:href='#gpPt0' transform='translate(64.4,417.1) scale(4.50)' color='rgb(148,   0, 211)'/>\n",
       "\t<use xlink:href='#gpPt0' transform='translate(53.9,421.3) scale(4.50)' color='rgb(148,   0, 211)'/>\n",
       "</g>\n",
       "\t</g>\n",
       "<g fill=\"none\" color=\"white\" stroke=\"rgb(148,   0, 211)\" stroke-width=\"2.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"2.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"black\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "</g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "\t<path stroke='black'  d='M53.9,16.7 L53.9,422.4 L575.0,422.4 L575.0,16.7 L53.9,16.7 Z  '/></g>\n",
       "<g fill=\"none\" color=\"black\" stroke=\"currentColor\" stroke-width=\"1.00\" stroke-linecap=\"butt\" stroke-linejoin=\"miter\">\n",
       "</g>\n",
       "</g>\n",
       "</svg>\n",
       "\n"
      ],
      "text/plain": [
       "#<GnuplotRB::Plot:0x00000003bd79c0 @options=Hamster::Hash[:xlabel => \"c(NO) [ppm]\"], @datasets=Hamster::Vector[#<GnuplotRB::Dataset:0x00000003bd7740 @type=:datablock, @data=#<GnuplotRB::Datablock:0x00000003bd74e8 @stored_in_file=false, @data=\"0.11919868665889212 200.65600000000003 1.6254238421613807\\n0.09563777666432749 163.6076923076923 0.25581983305101413\\n0.0719386795143695 120.21249999999999 2.122451202535138\\n0.04810017591058823 80.86129032258063 0.11412852774981622\\n0.02436152386020471 38.9 1.6161020123388603\\n0.01694972144909683 26.583333333333332 1.338759790917616\\n0.012114118377481482 19.860000000000003 0.050990195135927806\\n0.006061549225203855 7.339999999999999 1.345585374474619\\n0.002425698577514091 3.28 0.2222611077089287\\n0.0 0.7000000000000001 0.07071067811865475\\n\">, @options=Hamster::Hash[:with => \"yerrorbars\", :title => \"\", :using => \"1:2:3\"]>], @cmd=\"plot \">"
      ]
     },
     "execution_count": 137,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "GnuplotRB::Plot.new(\n",
    "  [cld[:mean, :std], with: \"yerrorbars\", title: \"\"],\n",
    "  xlabel: \"c(NO) [ppm]\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {
    "collapsed": true
   },
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Ruby 2.1.1",
   "language": "ruby",
   "name": "ruby"
  },
  "language_info": {
   "file_extension": ".rb",
   "mimetype": "application/x-ruby",
   "name": "ruby",
   "version": "2.1.1"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 0
}
